---
layout: default
title: Dev Diary 1 GameMap
excerpt: When I first thought of the creating the gamemap, I planned to made custom maps to maximize creative control. But I immediately realized that this was very time consuming as the maps were 60x60 tiles. 
published: true
---

# Early plans

When I first thought of the creating the gamemap, I planned to made custom maps to maximize
creative control. But I immediately realized that this was very time consuming as the maps were 60x60 tiles. Thats 3600 tiles that I would manually place myself. This was unacceptable as the deadline for mp2 was coming near. So I thought of a solution: procedural generation. Instead of hand creating the maps myself I would let the computer do it for me. The question now is how though?

# Generating a Map

After some researching, I came across these:

[Making maps with noise functions][Making maps with noise functions]

The article gives a quick and easy way to generate maps and I used the above to generate my maps as shown here:

The method **noise1** and **noise2** takes two values nx and ny and uses two Simplex Noise generators to generate 2d noise which it maps to values from 0.0 to 1.0.

``` python
def noise1(nx, ny):
    return gen1.noise2d(nx, ny) / 2 + 0.5
def noise2(nx, ny):
    return gen2.noise2d(nx, ny) / 2 + 0.5
```

The method **generate_values** is the main workhorse that is responsible for making the noise map.

``` python
def generate_values():
    values = []
    for x in range(width):
        values.append([0] * height)
        for y in range(height):
            nx, ny = x/width - 0.5, y/height - 0.5
            e = (1.00 * noise1( 1 * nx,  1 * ny)
                + 0.50 * noise1( 2 * nx,  2 * ny)
                + 0.25 * noise1( 4 * nx,  4 * ny)
                + 0.13 * noise1( 8 * nx,  8 * ny)
                + 0.06 * noise1(16 * nx, 16 * ny)
                + 0.03 * noise1(32 * nx, 32 * ny))
            e /= (1.0+0.50+0.25+0.13+0.06+0.03)
            e = e ** 4
            e *= 10
            m = (1.00 * noise2( 1 * nx,  1 * ny)
                + 0.75 * noise2( 2 * nx,  2 * ny)
                + 0.33 * noise2( 4 * nx,  4 * ny)
                + 0.33 * noise2( 8 * nx,  8 * ny)
                + 0.33 * noise2(16 * nx, 16 * ny)
                + 0.50 * noise2(32 * nx, 32 * ny))
            m /= (1.00+0.75+0.33+0.33+0.33+0.50)
            values[x][y] = (e,m)
    return values
```

The method creates a *width x height* size matrix and fills each element with an (elevation, moisture) tuple. The elevation value is generated by summing up simplex noise at different frequencies and raising it to a power to push middle values down. The moisture value is generated similarly except without raising it to power.

However, this matrix of values are still useless to us. What we need is for each element of the matrix to be a specific kind of tile. The **biome** function is the answer for this.

```python
def biome(e, m):
    if (e < 0.06):
        return Tile.Type.WATER
    if (e < 0.12):
        return Tile.Type.SAND
    if (e > 0.8):
        if (m < 0.2):
            return Tile.Type.DARKSAND
        if (m < 0.5):
            return Tile.Type.GRASS
        if (m < 0.6):
            return Tile.Type.SHRUB
        return Tile.Type.TEMPERATE
    if (e > 0.6):
        if (m < 0.33):
            return Tile.Type.SAND
        if (m < 0.66):
            return Tile.Type.GRASS
        return Tile.Type.DIRT
    if (e > 0.3):
        if (m < 0.16):
            return Tile.Type.SAND
        if (m < 0.50):
            return Tile.Type.DIRT
        if (m < 0.83):
            return Tile.Type.GRASS
        return Tile.Type.GRASS
    if (m < 0.16):
        return Tile.Type.SAND
    if (m < 0.33):
        return Tile.Type.DIRT
    if (m < 0.66):
        return Tile.Type.GRASS
    return Tile.Type.DIRT
```

The code is very similar to the one in [Making maps with noise functions] with modifications to the suit amount of tiles and tile types in TankWarz.

[Go back](./)

[Making maps with noise functions]: https://www.redblobgames.com/maps/terrain-from-noise